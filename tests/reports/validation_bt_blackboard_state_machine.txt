BT / Blackboard / State Machine validation - 2026-02-01T10:50:38-08:00
================================================================

[Step 1] Unit tests (blackboard keys, persistence, hybrid logic, state machine contract)
============================= test session starts ==============================
platform linux -- Python 3.12.3, pytest-9.0.2, pluggy-1.6.0 -- /usr/bin/python3
cachedir: .pytest_cache
benchmark: 5.2.3 (defaults: timer=time.perf_counter disable_gc=False min_rounds=5 min_time=0.000005 max_time=1.0 calibration_precision=10 warmup=False warmup_iterations=100000)
rootdir: /home/durian/urc-machiato-2026/tests
configfile: pytest.ini
plugins: time-machine-3.2.0, asyncio-1.3.0, Faker-40.1.0, xdist-3.8.0, anyio-4.12.0, benchmark-5.2.3, mock-3.15.1, colcon-core-0.20.1, cov-4.1.0
asyncio: mode=Mode.STRICT, debug=False, asyncio_default_fixture_loop_scope=None, asyncio_default_test_loop_scope=function
collecting ... collected 14 items

tests/unit/core/test_hybrid_controller_logic.py::TestHybridControllerLogic::test_emergency_wins PASSED [  7%]
tests/unit/core/test_hybrid_controller_logic.py::TestHybridControllerLogic::test_override_over_mode PASSED [ 14%]
tests/unit/core/test_hybrid_controller_logic.py::TestHybridControllerLogic::test_mode_when_no_override PASSED [ 21%]
tests/unit/core/test_hybrid_controller_logic.py::TestHybridControllerLogic::test_emergency_stop_active_flat_key PASSED [ 28%]
tests/unit/core/test_blackboard_keys_schema.py::TestBlackboardKeysSchema::test_flat_keys_exist PASSED [ 35%]
tests/unit/core/test_blackboard_keys_schema.py::TestBlackboardKeysSchema::test_dot_keys_auto_namespace PASSED [ 42%]
tests/unit/core/test_blackboard_keys_schema.py::TestBlackboardKeysSchema::test_dot_keys_system_namespace PASSED [ 50%]
tests/unit/core/test_blackboard_persistence.py::TestBlackboardPersistenceLogic::test_persisted_keys_include_mission_and_mode SKIPPED [ 57%]
tests/unit/core/test_blackboard_persistence.py::TestBlackboardPersistenceLogic::test_load_skips_emergency_stop PASSED [ 64%]
tests/unit/core/test_blackboard_persistence.py::TestBlackboardPersistenceLogic::test_save_format_json PASSED [ 71%]
tests/unit/core/test_adaptive_state_machine_hybrid.py::TestAdaptiveStateMachineHybrid::test_emergency_stop_allowed_from_any_state PASSED [ 78%]
tests/unit/core/test_adaptive_state_machine_hybrid.py::TestAdaptiveStateMachineHybrid::test_battery_threshold_contract PASSED [ 85%]
tests/unit/core/test_adaptive_state_machine_hybrid.py::TestAdaptiveStateMachineHybrid::test_valid_transitions_idle_to_autonomous PASSED [ 92%]
tests/unit/core/test_adaptive_state_machine_hybrid.py::TestAdaptiveStateMachineHybrid::test_mode_request_and_flags_contract PASSED [100%]

- generated xml file: /home/durian/urc-machiato-2026/tests/reports/junit_blackboard_bt_state_machine.xml -
============================= slowest 10 durations =============================
0.02s setup    unit/core/test_hybrid_controller_logic.py::TestHybridControllerLogic::test_emergency_wins
0.00s call     unit/core/test_blackboard_persistence.py::TestBlackboardPersistenceLogic::test_save_format_json
0.00s setup    unit/core/test_hybrid_controller_logic.py::TestHybridControllerLogic::test_override_over_mode
0.00s teardown unit/core/test_hybrid_controller_logic.py::TestHybridControllerLogic::test_emergency_wins
0.00s call     unit/core/test_hybrid_controller_logic.py::TestHybridControllerLogic::test_emergency_wins
0.00s setup    unit/core/test_blackboard_persistence.py::TestBlackboardPersistenceLogic::test_persisted_keys_include_mission_and_mode
0.00s call     unit/core/test_blackboard_persistence.py::TestBlackboardPersistenceLogic::test_load_skips_emergency_stop
0.00s setup    unit/core/test_blackboard_persistence.py::TestBlackboardPersistenceLogic::test_save_format_json
0.00s setup    unit/core/test_blackboard_keys_schema.py::TestBlackboardKeysSchema::test_dot_keys_system_namespace
0.00s call     unit/core/test_blackboard_persistence.py::TestBlackboardPersistenceLogic::test_persisted_keys_include_mission_and_mode
======================== 13 passed, 1 skipped in 0.05s =========================
Step 1: PASSED

[Step 2] Contract integration tests (BT/state machine/blackboard source checks)
============================= test session starts ==============================
platform linux -- Python 3.12.3, pytest-9.0.2, pluggy-1.6.0 -- /usr/bin/python3
cachedir: .pytest_cache
benchmark: 5.2.3 (defaults: timer=time.perf_counter disable_gc=False min_rounds=5 min_time=0.000005 max_time=1.0 calibration_precision=10 warmup=False warmup_iterations=100000)
rootdir: /home/durian/urc-machiato-2026/tests
configfile: pytest.ini
plugins: time-machine-3.2.0, asyncio-1.3.0, Faker-40.1.0, xdist-3.8.0, anyio-4.12.0, benchmark-5.2.3, mock-3.15.1, colcon-core-0.20.1, cov-4.1.0
asyncio: mode=Mode.STRICT, debug=False, asyncio_default_fixture_loop_scope=None, asyncio_default_test_loop_scope=function
collecting ... collected 25 items

tests/integration/autonomy/test_bt_state_machine_integration.py::TestBTStateMachineIntegration::test_bt_queries_state_machine PASSED [  4%]
tests/integration/autonomy/test_bt_state_machine_integration.py::TestBTStateMachineIntegration::test_state_machine_service_interface PASSED [  8%]
tests/integration/autonomy/test_bt_state_machine_integration.py::TestBTStateMachineIntegration::test_blackboard_bt_integration PASSED [ 12%]
tests/integration/autonomy/test_bt_state_machine_integration.py::TestBTStateMachineIntegration::test_bt_state_machine_service_call_pattern PASSED [ 16%]
tests/integration/autonomy/test_bt_state_machine_integration.py::TestBTStateMachineIntegration::test_state_transition_from_bt PASSED [ 20%]
tests/integration/autonomy/test_bt_state_machine_integration.py::TestBTStateMachineIntegration::test_blackboard_input_sources PASSED [ 24%]
tests/integration/autonomy/test_bt_state_machine_integration.py::TestBTStateMachineIntegration::test_bt_mission_execution_flow PASSED [ 28%]
tests/integration/autonomy/test_bt_state_machine_integration.py::TestBTStateMachineIntegration::test_bt_telemetry_integration PASSED [ 32%]
tests/integration/autonomy/test_bt_state_machine_integration.py::TestBTStateMachineIntegration::test_missing_state_machine_service PASSED [ 36%]
tests/integration/autonomy/test_bt_state_machine_integration.py::TestBlackboardCommunication::test_blackboard_data_types PASSED [ 40%]
tests/integration/autonomy/test_bt_state_machine_integration.py::TestBlackboardCommunication::test_blackboard_thread_safety PASSED [ 44%]
tests/integration/autonomy/test_bt_state_machine_integration.py::TestBlackboardCommunication::test_blackboard_persistence PASSED [ 48%]
tests/integration/autonomy/test_complete_bt_state_machine_flow.py::TestCompleteBTStateMachineIntegration::test_adaptive_state_machine_service_creation PASSED [ 52%]
tests/integration/autonomy/test_complete_bt_state_machine_flow.py::TestCompleteBTStateMachineIntegration::test_bt_orchestrator_state_machine_queries PASSED [ 56%]
tests/integration/autonomy/test_complete_bt_state_machine_flow.py::TestCompleteBTStateMachineIntegration::test_blackboard_integration_complete PASSED [ 60%]
tests/integration/autonomy/test_complete_bt_state_machine_flow.py::TestCompleteBTStateMachineIntegration::test_bt_mission_file_completeness PASSED [ 64%]
tests/integration/autonomy/test_complete_bt_state_machine_flow.py::TestCompleteBTStateMachineIntegration::test_service_call_response_flow PASSED [ 68%]
tests/integration/autonomy/test_complete_bt_state_machine_flow.py::TestCompleteBTStateMachineIntegration::test_state_machine_state_transitions PASSED [ 72%]
tests/integration/autonomy/test_complete_bt_state_machine_flow.py::TestCompleteBTStateMachineIntegration::test_blackboard_data_flow_during_mission PASSED [ 76%]
tests/integration/autonomy/test_complete_bt_state_machine_flow.py::TestCompleteBTStateMachineIntegration::test_bt_state_machine_integration_architecture PASSED [ 80%]
tests/integration/autonomy/test_complete_bt_state_machine_flow.py::TestCompleteBTStateMachineIntegration::test_end_to_end_mission_execution_flow PASSED [ 84%]
tests/integration/autonomy/test_complete_bt_state_machine_flow.py::TestCompleteBTStateMachineIntegration::test_error_handling_and_recovery PASSED [ 88%]
tests/integration/autonomy/test_complete_bt_state_machine_flow.py::TestCompleteBTStateMachineIntegration::test_performance_requirements PASSED [ 92%]
tests/integration/autonomy/test_complete_bt_state_machine_flow.py::TestCompleteBTStateMachineIntegration::test_concurrent_mission_coordination PASSED [ 96%]
tests/integration/autonomy/test_complete_bt_state_machine_flow.py::TestCompleteBTStateMachineIntegration::test_integration_test_completeness PASSED [100%]

============================= slowest 10 durations =============================
0.02s setup    integration/autonomy/test_bt_state_machine_integration.py::TestBTStateMachineIntegration::test_bt_queries_state_machine
0.00s call     integration/autonomy/test_bt_state_machine_integration.py::TestBTStateMachineIntegration::test_missing_state_machine_service
0.00s setup    integration/autonomy/test_bt_state_machine_integration.py::TestBTStateMachineIntegration::test_state_transition_from_bt
0.00s call     integration/autonomy/test_complete_bt_state_machine_flow.py::TestCompleteBTStateMachineIntegration::test_blackboard_integration_complete
0.00s call     integration/autonomy/test_bt_state_machine_integration.py::TestBlackboardCommunication::test_blackboard_data_types
0.00s setup    integration/autonomy/test_complete_bt_state_machine_flow.py::TestCompleteBTStateMachineIntegration::test_service_call_response_flow
0.00s call     integration/autonomy/test_bt_state_machine_integration.py::TestBTStateMachineIntegration::test_bt_queries_state_machine
0.00s teardown integration/autonomy/test_bt_state_machine_integration.py::TestBTStateMachineIntegration::test_state_transition_from_bt
0.00s call     integration/autonomy/test_bt_state_machine_integration.py::TestBTStateMachineIntegration::test_blackboard_input_sources
0.00s call     integration/autonomy/test_bt_state_machine_integration.py::TestBTStateMachineIntegration::test_bt_telemetry_integration
============================== 25 passed in 0.05s ==============================
Step 2: PASSED

[Step 3] Live blackboard - Prereqs: ROS built (./scripts/build_ros_for_bt_tests.sh), source install/setup.bash, ros2 run autonomy_bt bt_orchestrator (lifecycle configure/activate if needed)
  In another terminal: source install/setup.bash && export PYTHONPATH=src && python3 -m pytest tests/integration/core/test_unified_blackboard.py -v --tb=short
[Step 4] BT + state machine runtime - Prereqs: same as Step 3 plus adaptive_state_machine running
  Same terminal: python3 -m pytest tests/integration/autonomy/test_bt_state_machine_runtime.py -v --tb=short
Steps 3-4: SKIP (run manually; full testing plan order: docs/development/BUILD_AND_TEST.md#testing-plan-order)

================================================================
Validation complete. Steps 1-2 passed. Steps 3-4 require live ROS and built autonomy_bt.
