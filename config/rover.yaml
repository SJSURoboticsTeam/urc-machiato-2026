# URC 2026 Rover Configuration - Flat & Simple
# All settings at top level with clear names - no nesting complexity

# === CORE SIMULATION ===
simulation_update_rate_hz: 10 # How fast simulation runs (Hz)
simulation_odom_noise: 0.01 # Position noise (meters)
simulation_imu_noise: 0.001 # IMU sensor noise
simulation_gps_noise: 0.5 # GPS position noise (meters)

# === MISSION EXECUTION ===
mission_execution_rate_hz: 10 # Mission update frequency (Hz)
mission_odom_logging_interval: 10 # Log position every N readings
mission_execution_logging_interval: 5 # Log progress every N steps
mission_timeout_seconds: 1800 # Max mission time (30 minutes)
mission_waypoint_timeout_seconds: 300 # Max time per waypoint (5 min)
mission_max_speed_mps: 1.0 # Maximum mission speed
mission_heading_tolerance_degrees: 5.0 # Heading accuracy required
mission_emergency_stop_enabled: true # Allow emergency stops
mission_auto_recovery_enabled: true # Auto-recover from failures

# === NAVIGATION & SLAM ===
slam_pose_logging_interval: 10 # Log position every N poses
slam_map_publish_interval: 10 # Update map every N poses
slam_path_history_limit: 50 # Keep last N positions in memory
# Navigation-SLAM integration (navigation_node)
navigation_slam_pose_topic: "slam/pose"
navigation_slam_fused_topic: "slam/pose/fused"
navigation_slam_pose_max_age_sec: 1.0 # Fall back to odom if SLAM older than this
navigation_slam_confidence_min: 0.3 # Use SLAM only when confidence >= this

# === NETWORK & COMMUNICATION ===
network_qos_depth_sensor: 1 # Keep last N sensor messages
network_qos_depth_command: 5 # Keep last N command messages
network_qos_depth_status: 1 # Keep last N status messages

# === HARDWARE SETTINGS ===
hardware_use_mock: true # Use fake hardware for testing
hardware_websocket_url: "ws://localhost:8080" # WebSocket server
hardware_can_enabled: false # Enable CAN bus
hardware_can_interface: "can0" # CAN interface name
hardware_cameras_enabled: true # Enable cameras
hardware_camera_front_url: "http://camera1.local:8080" # Front camera
hardware_camera_rear_url: "http://camera2.local:8080" # Rear camera

# === SAFETY LIMITS ===
safety_distance_meters: 0.3 # Min distance to obstacles
safety_max_speed_mps: 2.0 # Maximum rover speed
safety_boundary_radius_meters: 100.0 # Max distance from start
safety_thermal_limit_celsius: 70.0 # Overheat shutdown temp
safety_battery_critical_percent: 10.0 # Low battery emergency
safety_motor_max_rpm: 1500 # Maximum motor speed
safety_imu_accel_max: 50.0 # m/sÂ² (unreasonable acceleration)
safety_imu_gyro_max: 20.0 # rad/s (unreasonable rotation)
safety_communication_timeout: 5.0 # seconds for watchdog
safety_auto_recovery_enabled: false # Auto-recover from safety events
safety_watchdog_heartbeat_timeout: 5.0 # seconds
safety_sensor_integrity_timeout: 2.0 # seconds

# === TESTING & DEBUG ===
testing_phase_interval: 2.0 # Seconds between test phases
testing_performance_monitor_interval: 0.2 # Performance check frequency

# === MONITORING ===
enable_monitoring: true # Collect performance data
log_level: "INFO" # DEBUG, INFO, WARN, ERROR

# === COMPUTER VISION ===
# Competition object detection (mallet, hammer, water bottle, keyboard)
vision_model_path: ""  # Path to YOLO or other model weights (optional)
vision_aruco_dict: "DICT_4X4_50"
vision_aruco_adaptive_outdoor: true  # Adaptive thresholds for outdoor lighting
vision_d435_resolution_typing: "640x480"  # Resolution for keyboard typing mission

# === MISSION PROFILES ===
# Resource optimization profiles for different mission types
mission_profiles:
  waypoint_navigation:
    # Minimal resources for GPS waypoint following
    computer_vision_enabled: false
    terrain_analysis_enabled: false
    slam_loop_closure_enabled: false
    slam_memory_limit_mb: 256
    vision_fps: 10
    vision_resolution: "480p"
    excavation_enabled: false
    science_payload_enabled: false
    advanced_path_planning: false
    telemetry_level: "minimal"  # reduced logging

  object_search:
    # Vision-focused with moderate SLAM
    computer_vision_enabled: true
    terrain_analysis_enabled: false  # save resources during search
    slam_loop_closure_enabled: true
    slam_memory_limit_mb: 512
    vision_fps: 20
    vision_resolution: "720p"
    excavation_enabled: false
    science_payload_enabled: false
    advanced_path_planning: false
    telemetry_level: "standard"

  sample_collection:
    # Full capabilities for precision work
    computer_vision_enabled: true
    terrain_analysis_enabled: true
    slam_loop_closure_enabled: true
    slam_memory_limit_mb: 1024
    vision_fps: 30
    vision_resolution: "1080p"
    excavation_enabled: true
    science_payload_enabled: true
    advanced_path_planning: true
    telemetry_level: "detailed"

  equipment_service:
    # Precision navigation with reduced vision
    computer_vision_enabled: false
    terrain_analysis_enabled: true
    slam_loop_closure_enabled: true
    slam_memory_limit_mb: 768
    vision_fps: 0  # disabled
    vision_resolution: "disabled"
    excavation_enabled: false
    science_payload_enabled: false
    advanced_path_planning: true
    telemetry_level: "standard"

  delivery:
    # Balanced for carrying payloads
    computer_vision_enabled: true
    terrain_analysis_enabled: true
    slam_loop_closure_enabled: true
    slam_memory_limit_mb: 768
    vision_fps: 15
    vision_resolution: "720p"
    excavation_enabled: false
    science_payload_enabled: false
    advanced_path_planning: true
    telemetry_level: "standard"

# === RESOURCE LIMITS ===
# Adaptive resource management thresholds
resource_limits:
  cpu_warning_percent: 75
  cpu_critical_percent: 90
  memory_warning_mb: 500
  memory_critical_mb: 700
  adaptive_scaling_enabled: true
  auto_disable_components: true

# === MISSION WAYPOINTS ===
waypoints:
  - name: "Start Point"
    x: 0.0
    y: 0.0
    tolerance: 1.0
  - name: "Checkpoint 1"
    x: 10.0
    y: 5.0
    tolerance: 1.0
  - name: "Checkpoint 2"
    x: 20.0
    y: 10.0
    tolerance: 1.5
